Next we prepare the pronunciation dictionary, which
we will assume to be located at \verb!data/local/dict!, so all the files
described below will be assumed to reside in that directory.
In the \verb!iban! example the files described in this section
are created by the script \verb!local/prepare_dict.sh!.

First one prepares a file \verb!lexicon.txt! specifying
the pronunciations of some subset
of the words found in \verb!data/train/text!.
Naturally one is most interested in pronunciations
of the most common words, so it would be natural
to first order all the words of \verb!data/train/text! by
their frequencies, and then select, say, the 10,000 most common words
to be included in \verb!lexicon.txt!.
Note that the lexicon does {\em not} explicitly contain words
from \verb!data/test/text!. This affords the opportunity
to invoke another mechanism during testing,
namely the {\em unknown model},
whenever out-of-vocabulary words are encountered.

Each line of \verb!lexicon.txt! contains a word, followed by a space or tab,
followed by a sequence of phones, represented by tokens taken from a fixed
pronunciation alphabet.
For example, the first ten lines of the file are shown
below, from \verb!iban! on the left, and from \verb!wsj! on the right.

\begin{multicols}{2}
\begin{verbatim}
<sil>   SIL
<UNK>   SIL
ke      k @
nya     NJ a KK
iya     i j a
ba      b a KK
dua     d u w a
sida    s i d a KK
puluh   p u l u @ h
raban   r a b a n
\end{verbatim}
\begin{verbatim}
A42128  EY1 F AO1 R T UW1 W AH1 N T UW1 EY1 T
AAA  T R IH2 P AH0 L EY1
AABERG  AA1 B ER0 G
AACHEN  AA1 K AH0 N
AACHENER  AA1 K AH0 N ER0
A  AH0
AAKER  AA1 K ER0
AALSETH  AA1 L S EH0 TH
AAMODT  AA1 M AH0 T
AANCOR  AA1 N K AO2 R
\end{verbatim}
\end{multicols}

In the case of \verb!wsj! the pronunciations were extracted
from a dictionary that \verb!run.sh! downloaded from \verb!cmu.edu!.
In the case of \verb!iban! the pronunciations were provided
in the dataset. Another choice is to compose \verb!lexicon.txt!
by hand in case a pronunciation dictionary is unavailable.
Still another choice is to simply use the sequence of
letters of each word as a surrogate for its pronunciation.
This works well for {\em phonetic} languages
such as Spanish, since each letter is usually
pronounced in the same way.

Note also that \verb!lexicon.txt! from \verb!iban! also contains
entries for two special phones, \verb!<sil>! and \verb!<UNK>!,
both having pronunciation \verb!SIL!.
We should say more about this here.

Each of the tokens representing phones in \verb!lexicon.txt!
is expected to be listed in one the files
\verb!nonsilence_phones.txt!,
\verb!silence_phones.txt!, or
\verb!optional_silence.txt!.
In this way the phonetic transcriptions can be mapped to integer
sequences, the integers referring to line numbers in these files.
We should say more about these files here.
